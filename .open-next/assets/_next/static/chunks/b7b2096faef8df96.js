(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95187,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r={callServer:function(){return n.callServer},createServerReference:function(){return c.createServerReference},findSourceMapURL:function(){return o.findSourceMapURL}};for(var a in r)Object.defineProperty(i,a,{enumerable:!0,get:r[a]});let n=e.r(32120),o=e.r(92245),c=e.r(35326)},67053,e=>{"use strict";var t=e.i(95187);let i=(0,t.createServerReference)("40aa9a23cc31ec7552bb071adb6c186c1316340f0e",t.callServer,void 0,t.findSourceMapURL,"subscribeUserToAllApps");e.s(["subscribeUserToAllApps",()=>i])},40865,e=>{"use strict";var t=e.i(43476),i=e.i(71645),r=e.i(67053);function a(){let[e,a]=(0,i.useState)(!1),n=(0,i.useCallback)(async()=>{try{if(!("serviceWorker"in navigator)||!("PushManager"in window))return;let e=window.location.pathname,t=e.startsWith("/view/"),i=e.startsWith("/dashboard");if(t||!i)return;let a="BIFNHw49PNTEROFsHuLJCXPZmx0ORrW1Uk1FTMwlCdYqo194mKErSqz2o4133b--gE1MKzI8xfRQxcnIO026K_0",n=await navigator.serviceWorker.ready,o=await n.pushManager.getSubscription();!o&&a&&(o=await n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(e){let t="=".repeat((4-e.length%4)%4),i=(e+t).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(i),a=new Uint8Array(r.length);for(let e=0;e<r.length;++e)a[e]=r.charCodeAt(e);return a}(a)})),o&&(console.log("Subscription Token Berhasil Dibuat:",o),i&&await (0,r.subscribeUserToAllApps)(JSON.parse(JSON.stringify(o))))}catch(e){console.error("Subscription update failed",e)}},[]);async function o(){try{let e=await Notification.requestPermission();"granted"===e&&(await n(),a(!1))}catch{}}return((0,i.useEffect)(()=>{!async function(){let e=window.location.pathname;if(/^\/view\/([^/]+)/.test(e))return;let t=window.navigator,i=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||!!t.standalone;if(console.log("Notification system initialized"),"serviceWorker"in navigator)try{await navigator.serviceWorker.register("/sw.js")}catch(e){console.error("Service Worker registration failed",e)}"granted"===Notification.permission?(await n(),a(!1)):"default"!==Notification.permission||i||a(!0)}();let e=window.location.pathname;if(/^\/view\/([^/]+)/.test(e))return;let t=!1;async function i(){if(!t){t=!0;try{if("default"===Notification.permission){let e=await Notification.requestPermission();"granted"===e&&await n()}}catch{}}}return document.addEventListener("click",i,{once:!0,capture:!0}),()=>{document.removeEventListener("click",i,{capture:!0})}},[n]),e)?(0,t.jsx)("div",{className:"fixed bottom-4 right-4 z-50",children:(0,t.jsx)("button",{onClick:o,className:"px-3 py-1.5 rounded-md shadow-md border bg-white text-slate-800 text-xs","aria-label":"Aktifkan Notifikasi",title:"Ketuk untuk aktifkan notifikasi",children:"Ketuk untuk aktifkan notifikasi"})}):null}e.s(["default",()=>a])}]);